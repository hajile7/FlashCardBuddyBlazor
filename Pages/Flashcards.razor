@using FlashCardBuddyBlazor.Models;
@using FlashCardBuddyBlazor.Services;

@page "/Flashcards"

@inject FlashcardService flashcardService;
@inject UserService userservice; 
<PageTitle>Flashcards</PageTitle>

<h1>Flashcards:</h1>

@if(userservice.Isloggedin)
{
    <p>@userservice.activeUser.Username</p>
}


    <ul>
        @foreach(Flashcard card in flashcards)
        {
            <li>@card.Question</li>
            <li>@card.Answer</li>
        }
    </ul>


@code
{
    List<Flashcard> flashcards = new List<Flashcard>();

    protected override async Task OnInitializedAsync() 
    {
        if (userservice.Isloggedin) 
        {
            flashcards = await flashcardService.GetFlashCardsAsync(userservice.activeUser.Userid);
        }
        if(flashcards.Count > 0) 
        {
            StateHasChanged(); 
        }
    } 
}